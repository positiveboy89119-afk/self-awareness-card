<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Digital SEL</title>

<style>
  :root{
    --gap: 18px;
    --tilt: -10deg;
    --active-scale: 1.06;
  }

  *{ box-sizing: border-box; }

  body{
    margin:0;
    padding: 18px;
    font-family: system-ui, -apple-system, "Noto Sans KR", sans-serif;
    background:#fff;
    overflow-x: hidden; /* ✅ 가로 삐져나옴 방지 */
  }

  .section{
    max-width: 1100px;
    margin: 0 auto;
  }

  .section h2{
    margin: 0 0 12px;
    font-size: 22px;
    font-weight: 900;
    letter-spacing: -0.2px;
  }

  /* ✅ 가로 스크롤 레일 */
  .rail{
    display:flex;
    gap: var(--gap);
    overflow-x: auto;
    overflow-y: hidden;
    padding: 14px 12px 18px;
    background:#f5f7fb;
    border-radius: 22px;

    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;

    width: 100%;
    max-width: 100%;
  }

  /* 스크롤바 */
  .rail::-webkit-scrollbar{ height: 10px; }
  .rail::-webkit-scrollbar-thumb{
    background: rgba(0,0,0,.25);
    border-radius: 999px;
  }
  .rail::-webkit-scrollbar-track{
    background: rgba(0,0,0,.08);
    border-radius: 999px;
  }

  /* ✅ 카드(반응형 폭: 화면에 따라 자동 조절) */
  .card{
    flex: 0 0 clamp(220px, 72vw, 280px); /* ✅ 모바일/PC 폭 안정 */
    height: 330px;

    background:#fff;
    border-radius: 20px;
    padding: 16px;
    box-shadow: 0 10px 22px rgba(0,0,0,.10);

    scroll-snap-align: center;

    transform: rotate(var(--tilt)) scale(1);
    transition: transform .18s ease, box-shadow .18s ease;

    cursor: pointer;
    outline: none;
  }

  /* ✅ 마우스 올리면 세워짐 */
  .card:hover{
    transform: rotate(0deg) scale(var(--active-scale));
    box-shadow: 0 18px 36px rgba(0,0,0,.16);
  }

  /* ✅ “가운데(센터) 카드”로 판단되면 자동 확대 + 정렬 */
  .card.active{
    transform: rotate(0deg) scale(var(--active-scale));
    box-shadow: 0 18px 36px rgba(0,0,0,.16);
  }

  /* 이미지 영역 */
  .media{
    width:100%;
    height: 250px;
    border-radius: 16px;
    overflow: hidden;
    background:#eef1f8;
    display:flex;
    align-items:center;
    justify-content:center;
    border: 1px solid rgba(0,0,0,.06);
  }

  .media img{
    width:100%;
    height:100%;
    object-fit: contain; /* ✅ 이미지 전체 보이기 */
    display:block;
  }

  /* ✅ 글자 중복 방지: 이미지에 글자가 있으니 제목은 숨김(원하면 아래를 주석처리 해제해서 다시 보이게 가능) */
  .title{
    display: none;  /* ✅ 글자 중복 제거 */
    /* margin: 14px 0 0;
    text-align:center;
    font-size:18px;
    font-weight:900;
    line-height:1.3; */
  }

  /* 작은 여백 조정(가로 튀어나옴 방지 보강) */
  @media (max-width: 520px){
    body{ padding: 14px; }
    .card{ height: 320px; }
    .media{ height: 240px; }
  }
</style>
</head>

<body>
<section class="section">
  <h2>사회정서교육</h2>

  <div class="rail" id="rail" aria-label="가로 스크롤 메뉴">
    <!-- 순서: 자기인식, 관계인식, 공동체, 마음건강 -->
    <div class="card" tabindex="0">
      <div class="media">
        <img src="images/self.png" alt="자기인식">
      </div>
      <div class="title">자기 인식<br>자기 관리</div>
    </div>

    <div class="card" tabindex="0">
      <div class="media">
        <img src="images/relation.png" alt="관계인식">
      </div>
      <div class="title">관계 인식<br>관계 관리</div>
    </div>

    <div class="card" tabindex="0">
      <div class="media">
        <img src="images/community.png" alt="공동체">
      </div>
      <div class="title">공동체</div>
    </div>

    <div class="card" tabindex="0">
      <div class="media">
        <img src="images/mind.png" alt="마음건강">
      </div>
      <div class="title">마음 건강</div>
    </div>
  </div>
</section>

<script>
  // ✅ 가운데(센터)에 가장 가까운 카드를 active로 만들어 "가운데에 있다가 살짝 커짐" 구현
  const rail = document.getElementById("rail");
  const cards = Array.from(rail.querySelectorAll(".card"));

  function updateActiveCard(){
    const railRect = rail.getBoundingClientRect();
    const centerX = railRect.left + railRect.width / 2;

    let best = null;
    let bestDist = Infinity;

    cards.forEach(card => {
      const r = card.getBoundingClientRect();
      const cardCenter
